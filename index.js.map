{"version":3,"file":"index.js","sources":["../src/js/api/booksApi.js","../src/js/refs/refs.js","../src/js/templates/templateBook.js","../src/js/templates/templateBooks.js","../src/js/templates/templateCategory.js","../src/js/templates/templateCategories.js","../src/js/templates/templateSelectedCategory.js","../src/js/renders/renders.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport class BooksApi {\n  constructor() {\n    this.BASE_URL = 'https://books-backend.p.goit.global';\n    this.END_POINT = '/books';\n  }\n\n  async fetchData(path = '') {\n    const url = `${this.BASE_URL}${this.END_POINT}${path}`;\n    const res = await axios.get(url);\n    return res.data;\n  }\n\n  getCategoryList() {\n    return this.fetchData('/category-list');\n  }\n\n  async getTopBooks() {\n    return this.fetchData('/top-books');\n  }\n\n  async getBooksByCategory(selectedCategory) {\n    const encoded = encodeURIComponent(selectedCategory)\n    return this.fetchData(`/category?category=${encoded}`);\n  }\n\n  async getBooksById(bookId) {\n    return this.fetchData(`/${bookId}`);\n  }\n}","export const refs = {\n  rootElem: document.querySelector('#app'),\n  categoryElem: document.querySelector('.categories-list'),\n  allCategoryElem: document.querySelector('#allCategories'),\n  topBooksElem: document.querySelector('.top-books-block'),\n  bookListElem: document.querySelector('.top-books-list'),\n  shoppingListElem: document.querySelector('.shopping-list'),\n  shoppingLinkElem: document.querySelector('.shopping-link'),\n  seeMoreButtonElem: document.querySelector('.see-more-button'),\n  navElem: document.querySelector('.header-navigation-list'),\n};","export function templateBook({ book_image, title, author }) {\n\n  return `\n  <li class=\"book-item\">\n      <img src=${book_image} class=\"book-image\" >\n      <h3 class=\"book-title\">${title}</h3>\n      <p>${author}</p>\n  </li>\n  `;\n}\n\n\n","import { templateBook } from \"./templateBook\";\n\nexport function templateSection({ list_name, books }) {\n  const firstFiveBooks = books.slice(0, 5);\n  const booksMarkup = firstFiveBooks.map(templateBook).join('');\n\n  return `\n    <li>\n      <h3 class=\"section-title test2\">${list_name}</h3>\n      <ul class=\"book-list\">\n        ${booksMarkup}\n      </ul>\n      <button class=\"see-more-button\" data-category=${list_name}>See more</button>\n    </li>\n  `;\n}\n\n\nexport function templateBooks(sections) {\n  return sections.map(templateSection).join('');\n}\n\n\n\n\n","export function templateCategory({ list_name }) {\n  return `\n      <li class=\"category-item\" data-category='${list_name}'>\n        <a href='#${list_name}'>${list_name}</a>\n      </li> `;\n}","import { templateCategory } from './templateCategory'\n\nexport function templateCategories(data) {\n  return data.map(templateCategory).join('');\n}","import { templateBook } from './templateBook';\n\nexport function templateSelectedCategory(books) {\n  const title = books.map(item => item.list_name).slice(0, 1);\n  const markup = books.map(templateBook).join('');\n\n  return `\n    <h3 class='test'>${title}</h3>\n    <ul class='category-list'>\n      ${markup}\n    </ul>`;\n}\n","import { refs } from \"../refs/refs\";\nimport { templateBooks } from \"../templates/templateBooks\";\nimport { templateCategories } from \"../templates/templateCategories\";\nimport { templateSelectedCategory } from \"../templates/templateSelectedCategory\";\n\nexport function renderCategories(data) {\n  const markup = templateCategories(data);\n  return (refs.categoryElem.insertAdjacentHTML('beforeend', markup));\n}\n\nexport function renderTopBooks(books) {\n  const markup = templateBooks(books);\n  console.log(refs.bookListElem);\n\n  return refs.bookListElem.innerHTML = markup;\n}\n\nfunction renderSelectedCategory(data) {\n  const markup = templateSelectedCategory(data);\n  console.log(refs.topBooksElem);\n\n  return refs.topBooksElem.innerHTML = markup;\n}\n\nexport const renders = { renderCategories, renderTopBooks, renderSelectedCategory }","import { BooksApi } from './js/api/booksApi';\nimport { refs } from './js/refs/refs';\nimport { renders } from './js/renders/renders';\n\nconst bookApi = new BooksApi();\n\nexport async function renderHomePage() {\n\n\n  const categories = await bookApi.getCategoryList();\n  const topBooks = await bookApi.getTopBooks();\n\n  renders.renderCategories(categories);\n  renders.renderTopBooks(topBooks);\n}\n\nrenderHomePage();\n\nrefs.categoryElem.addEventListener('click', onCategoryClick);\n\nasync function onCategoryClick(e) {\n  const selectedCategory = e.target.textContent;\n  if (e.currentTarget === e.target) return;\n  setActiveCategory(selectedCategory);\n  if (selectedCategory === \"All categories\") {\n    const topBooks = await bookApi.getTopBooks();\n    renders.renderTopBooks(topBooks);\n  } else {\n    const res = await bookApi.getBooksByCategory(selectedCategory);\n    renders.renderSelectedCategory(res);\n  }\n}\n\nfunction setActiveCategory(name) {\n  document.querySelectorAll('.category-item a').forEach(link => link.classList.remove('active'));\n  const links = document.querySelectorAll('.category-item a');\n\n  links.forEach(link => {\n    if (link.innerText === name) {\n      link.classList.add('active');\n    }\n  });\n}\n\nrefs.bookListElem.addEventListener('click', async e => {\n  if (e.target.classList.contains('see-more-button')) {\n    const section = e.target.closest('li');\n    const selectedCategory = section.querySelector('h3').textContent;\n    console.log(section.querySelector('h3'));\n\n    const res = await bookApi.getBooksByCategory(selectedCategory);\n    setActiveCategory(selectedCategory);\n    renders.renderSelectedCategory(res);\n  }\n});\n\n\n"],"names":["BooksApi","path","url","axios","selectedCategory","encoded","bookId","refs","templateBook","book_image","title","author","templateSection","list_name","books","booksMarkup","templateBooks","sections","templateCategory","templateCategories","data","templateSelectedCategory","item","markup","renderCategories","renderTopBooks","renderSelectedCategory","renders","bookApi","renderHomePage","categories","topBooks","onCategoryClick","setActiveCategory","res","name","link","section"],"mappings":"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"}